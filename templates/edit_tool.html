{% extends "base.html" %}

{% block title %}Edit {{ tool.name }} - Toolshed App{% endblock %}

{% block content %}
<div class="flex justify-between align-center mb-30">
    <h1 class="section-header">Edit Tool</h1>
    <a href="{{ url_for('tool_detail', tool_id=tool.id) }}" class="btn">Cancel</a>
</div>

<div style="max-width: 800px;">
    <form method="POST" action="{{ url_for('edit_tool', tool_id=tool.id) }}" enctype="multipart/form-data">
        <div style="background: var(--bg-secondary); border: 2px solid var(--border); padding: 30px;">
            
            <div class="form-group">
                <label class="form-label" for="name">Tool Name *</label>
                <input type="text" id="name" name="name" class="form-input" value="{{ tool.name }}" required>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div class="form-group">
                    <label class="form-label" for="brand">Brand</label>
                    <input type="text" id="brand" name="brand" class="form-input" value="{{ tool.brand or '' }}">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="model">Model</label>
                    <input type="text" id="model" name="model" class="form-input" value="{{ tool.model or '' }}">
                </div>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div class="form-group">
                    <label class="form-label" for="category">Category</label>
                    <select id="category" name="category" class="form-select">
                        <option value="">Select Category</option>
                        <option value="Power Tool" {% if tool.category == "Power Tool" %}selected{% endif %}>Power Tool</option>
                        <option value="Hand Tool" {% if tool.category == "Hand Tool" %}selected{% endif %}>Hand Tool</option>
                        <option value="Measuring Tool" {% if tool.category == "Measuring Tool" %}selected{% endif %}>Measuring Tool</option>
                        <option value="Cutting Tool" {% if tool.category == "Cutting Tool" %}selected{% endif %}>Cutting Tool</option>
                        <option value="Fastening Tool" {% if tool.category == "Fastening Tool" %}selected{% endif %}>Fastening Tool</option>
                        <option value="Sanding Tool" {% if tool.category == "Sanding Tool" %}selected{% endif %}>Sanding Tool</option>
                        <option value="Other" {% if tool.category == "Other" %}selected{% endif %}>Other</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="condition">Condition</label>
                    <select id="condition" name="condition" class="form-select">
                        <option value="New" {% if tool.condition == "New" %}selected{% endif %}>New</option>
                        <option value="Good" {% if tool.condition == "Good" %}selected{% endif %}>Good</option>
                        <option value="Fair" {% if tool.condition == "Fair" %}selected{% endif %}>Fair</option>
                        <option value="Needs Repair" {% if tool.condition == "Needs Repair" %}selected{% endif %}>Needs Repair</option>
                    </select>
                </div>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px;">
                <div class="form-group">
                    <label class="form-label" for="purchase_date">Purchase Date</label>
                    <input type="date" id="purchase_date" name="purchase_date" class="form-input" value="{{ tool.purchase_date or '' }}">
                </div>
                
                <div class="form-group">
                    <label class="form-label" for="purchase_price">Purchase Price (NZD)</label>
                    <input type="number" id="purchase_price" name="purchase_price" 
                           class="form-input" step="0.01" min="0" value="{{ tool.purchase_price or '' }}">
                </div>
            </div>
            
            <div class="form-group">
                <label class="form-label" for="location">Storage Location</label>
                <input type="text" id="location" name="location" class="form-input" 
                       value="{{ tool.location or '' }}" placeholder="e.g., Workshop drawer 3, Toolbox, Shelf A">
            </div>
            
            <div class="form-group">
                <label class="form-label" for="bunnings_url">Bunnings URL</label>
                <input type="url" id="bunnings_url" name="bunnings_url" class="form-input"
                       value="{{ tool.bunnings_url or '' }}" placeholder="https://www.bunnings.co.nz/...">
            </div>
            
            <div class="form-group">
                <label class="form-label" for="manual_url">Manual/Datasheet URL</label>
                <input type="url" id="manual_url" name="manual_url" class="form-input"
                       value="{{ tool.manual_url or '' }}" placeholder="https://...">
            </div>
            
            <div class="form-group">
                <label class="form-label" for="notes">Notes</label>
                <textarea id="notes" name="notes" class="form-textarea" 
                          placeholder="Additional information, maintenance notes, specifications...">{{ tool.notes or '' }}</textarea>
            </div>
            
            <div class="form-group">
                <label class="form-label" for="image">Tool Image</label>
                {% if tool.image_path %}
                <div style="margin-bottom: 10px;">
                    <img src="{{ url_for('static', filename=tool.image_path) }}" 
                         alt="Current image" 
                         style="max-width: 200px; border: 2px solid var(--border);">
                </div>
                {% endif %}
                <input type="file" id="image" name="image" class="form-input" accept="image/*">
                <div style="margin-top: 8px; font-size: 12px; color: var(--text-secondary);">
                    Accepted formats: PNG, JPG, GIF, WebP (Max 16MB)
                    {% if tool.image_path %}â€¢ Leave empty to keep current image{% endif %}
                </div>
            </div>
            
            <div style="display: flex; gap: 15px; margin-top: 30px;">
                <button type="submit" class="btn btn-primary">Save Changes</button>
                <a href="{{ url_for('tool_detail', tool_id=tool.id) }}" class="btn">Cancel</a>
            </div>
        </div>
    </form>
</div>
{% endblock %}
